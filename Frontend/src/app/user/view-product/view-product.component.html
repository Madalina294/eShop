<!-- Loading State -->
<div class="loading-container" *ngIf="loading()">
  <div class="loading-spinner">
    <div class="spinner"></div>
    <p>{{ "viewProduct.loading" | translate }}</p>
  </div>
</div>

<!-- Product Details Container -->
<div class="product-container" *ngIf="!loading()">
  <!-- Product Image Card -->
  <div class="image-card">
    <mat-card class="product-image-card">
      <mat-card-content>
        <div class="image-container">
          <img
            [src]="getProductImage(product())"
            [alt]="product().name"
            class="product-image"
            onerror="this.src='user.png'"
          />
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Product Details Card -->
  <div class="details-card">
    <mat-card class="product-details-card">
      <mat-card-header>
        <mat-card-title class="product-title">{{
          product().name
        }}</mat-card-title>
        <mat-card-subtitle class="product-price">{{
          product().price | currency : "RON" : "symbol" : "1.2-2"
        }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="product-details">
          <!-- Description -->
          <div class="detail-section" *ngIf="product().description">
            <p class="detail-value description">{{ product().description }}</p>
          </div>

          <!-- Color -->
          <div class="detail-section" *ngIf="product().color">
            <p class="detail-value">
              <span class="detail-label">{{
                "viewProduct.details.color" | translate
              }}</span>
              {{ product().color }}
            </p>
          </div>

          <!-- Dimensions -->
          <div class="detail-section" *ngIf="product().dimensions">
            <p class="detail-value">
              <span class="detail-label">{{
                "viewProduct.details.dimensions" | translate
              }}</span>
              {{ product().dimensions }}
            </p>
          </div>

          <!-- Material -->
          <div class="detail-section" *ngIf="product().material">
            <p class="detail-value">
              <span class="detail-label">{{
                "viewProduct.details.material" | translate
              }}</span>
              {{ product().material }}
            </p>
          </div>

          <!-- Weight -->
          <div class="detail-section" *ngIf="product().weight">
            <p class="detail-value">
              <span class="detail-label">{{
                "viewProduct.details.weight" | translate
              }}</span>
              {{ product().weight }}
            </p>
          </div>

          <!-- Quantity -->
          <div class="detail-section" *ngIf="product().quantity !== undefined">
            <p class="detail-value">
              <span class="detail-label">{{
                "viewProduct.details.quantityAvailable" | translate
              }}</span>
              {{ product().quantity }}
              {{ "viewProduct.details.pieces" | translate }}
            </p>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions class="action-buttons">
        <!-- Add to Cart Button -->
        <button
          mat-raised-button
          color="primary"
          class="add-to-cart-btn"
          (click)="addToCart(product().id)"
          [disabled]="product().quantity === 0"
        >
          <mat-icon>shopping_cart</mat-icon>
          {{
            product().quantity === 0
              ? ("viewProduct.actions.outOfStock" | translate)
              : ("viewProduct.actions.addToCart" | translate)
          }}
        </button>

        <!-- Add to Wishlist Button -->
        <button
          mat-icon-button
          color="accent"
          class="wishlist-btn"
          (click)="addToWishList(product().id)"
          [matTooltip]="'viewProduct.actions.addToWishlist' | translate"
        >
          <mat-icon class="heart-icon">favorite_border</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
